package task_distributor;

import java.rmi.Naming;
import java.rmi.RMISecurityManager;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;

import rmi.TaskServer;

public class TaskDistributor {
	private TaskServer stub; 
	public TaskDistributor() {
		try {
			System.out.println("Starting task distributor");
			System.setSecurityManager(new RMISecurityManager());
			stub=(TaskServer)Naming.lookup("rmi://192.168.178.30:1099/taskManager");  
			
		}catch(Exception e){
			e.printStackTrace();
		}   
	} 
	
	public void execute(String command) {
		try {
			int pid2 = stub.execute(command);
		} catch (RemoteException e) {
			e.printStackTrace();
		}
	}
	
	public String getTaskData(int pid) {
		String s = "";
		try {
			s = stub.getOutput(pid);
		} catch (RemoteException e) {
			e.printStackTrace();
		}
	}
}
